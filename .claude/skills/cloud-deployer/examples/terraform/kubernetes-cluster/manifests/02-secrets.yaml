# =============================================================================
# Application Secrets
# =============================================================================
# NOTE: In production, use External Secrets Operator or similar
# to sync secrets from DigitalOcean or a secret management system

apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: todo-app
type: Opaque
data:
  # Base64 encoded values
  # Generate with: echo -n "your-secret" | base64

  # Database credentials (get from Terraform output)
  DB_USER: YXBwdXNlcg==  # "appuser"
  DB_PASSWORD: Y2hhbmdlLW1lLWluLXByb2R1Y3Rpb24=  # "change-me-in-production"

  # JWT secret
  JWT_SECRET: Y2hhbmdlLW1lLWluLXByb2R1Y3Rpb24tdXNlLXN0cm9uZy1zZWNyZXQ=  # "change-me-in-production-use-strong-secret"

  # API keys (if needed)
  API_KEY: Y2hhbmdlLW1lLWluLXByb2R1Y3Rpb24=  # "change-me-in-production"

  # SMTP credentials (for email)
  SMTP_HOST: c210cC5leGFtcGxlLmNvbQ==  # "smtp.example.com"
  SMTP_USER: YXBwQGV4YW1wbGUuY29t  # "app@example.com"
  SMTP_PASSWORD: Y2hhbmdlLW1l  # "change-me"

---
# =============================================================================
# DigitalOcean Database Connection Secret
# =============================================================================
# This secret stores the database connection details from managed PostgreSQL
# Run after Terraform apply to populate:
# kubectl create secret generic do-db-connection -n todo-app \
#   --from-literal=host='$DB_HOST' \
#   --from-literal=port='$DB_PORT' \
#   --from-literal=database='$DB_NAME' \
#   --from-literal=username='$DB_USER' \
#   --from-literal=password='$DB_PASSWORD' \
#   --from-literal=uri='$DB_URI'

apiVersion: v1
kind: Secret
metadata:
  name: do-db-connection
  namespace: todo-app
type: Opaque
stringData:
  # These will be populated from Terraform outputs
  host: "your-db-host.do.provider.com"
  port: "25060"
  database: "appdb"
  username: "appuser"
  password: "change-me"
  uri: "postgresql://appuser:change-me@your-db-host.do.provider.com:25060/appdb?sslmode=require"
  connection_string: "postgres://appuser:change-me@your-db-host.do.provider.com:25060/appdb?sslmode=require"

---
# =============================================================================
# Spaces/S3 Credentials Secret
# =============================================================================
# For accessing DigitalOcean Spaces

apiVersion: v1
kind: Secret
metadata:
  name: spaces-credentials
  namespace: todo-app
type: Opaque
stringData:
  # Spaces access credentials
  # Create at: https://cloud.digitalocean.com/account/api/tokens
  access_key: "your-spaces-access-key"
  secret_key: "your-spaces-secret-key"
  endpoint: "https://nyc3.digitaloceanspaces.com"
  region: "nyc3"
  bucket: "todo-app-assets"

---
# =============================================================================
# TLS Certificate Secret (for Ingress)
# =============================================================================
# NOTE: Use cert-manager to automatically provision certificates

apiVersion: v1
kind: Secret
metadata:
  name: tls-cert
  namespace: todo-app
type: kubernetes.io/tls
data:
  # tls.crt: <base64 encoded certificate>
  # tls.key: <base64 encoded private key>
  # Generate with cert-manager or manually with Let's Encrypt

---
# =============================================================================
# Registry Credentials Secret
# =============================================================================
# For pulling images from DigitalOcean Container Registry

apiVersion: v1
kind: Secret
metadata:
  name: registry-credentials
  namespace: todo-app
type: kubernetes.io/dockerconfigjson
data:
  # Generate with:
  # kubectl create secret docker-registry registry-credentials \
  #   --docker-server=registry.digitalocean.com \
  #   --docker-username=<your-docr-token-name> \
  #   --docker-password=<your-docr-token> \
  #   --docker-email=<your-email> \
  #   --dry-run=client -o yaml
  .dockerconfigjson: <base64-encoded-docker-config>
